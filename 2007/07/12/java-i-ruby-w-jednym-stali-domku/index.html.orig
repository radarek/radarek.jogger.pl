<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="pl" xml:lang="pl">
  <head>
    <title>Java i Ruby w jednym stali domku... - Radarek bloguje... o Ruby</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="verify-v1" content="XvR5kxyBmJGgUb1Tca8kJ+ii1Vde81UrpDJptt6JMeU=" />
    <link rel="shortcut icon" href="/files/favicon.png" type="image/png" />
    <meta name="keywords" content="introduction, java, jruby, ruby, JRuby, Ruby, Techblog, , ruby, ruby on rails, rails, merb, jruby, yarv, rubinius, ironruby, maglev, programowanie, radarek, radosław bułat, radoslaw bulat, radoslaw, bulat, python, gamedev" />
    <meta name="description" content="Wszystko co wiem o programowaniu, przede wszystkim Ruby." />
    <meta name="robots" content="index,follow"/>

    <link rel="stylesheet" href="/files/style.css" type="text/css" />
    <!--[if lte IE 6]><link rel="stylesheet" href="/files/style-ie6.css" type="text/css" /><![endif]-->
    <!--[if IE 7]><link rel="stylesheet" type="text/css" href="/files/style-ie7.css" /><![endif]-->

    <!--<script type="text/javascript" src="/files/jquery.js"></script>-->
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
    <script type="text/javascript" src="/files/common.js"></script>
    <script type="text/javascript" src="/files/highlight.js"></script>
    <script type="text/javascript" src="/files/dynamic.js"></script>
    <script type="text/javascript" src="/files/jruby.js"></script>
		
    
    <script type="text/javascript">
      hljs.initHighlightingOnLoad('ruby');
    </script>
    
    <!--[if lt IE 7.]><script defer type="text/javascript" src="/files/pngfix.js"></script><![endif]-->

    <link rel="alternate" type="application/atom+xml" title="Radarek bloguje... o Ruby - wpisy" href="http://feeds.feedburner.com/radarek-blog" />
    <link rel="alternate" type="application/atom+xml" title="Radarek bloguje... o Ruby - nagłówki" href="http://feeds.feedburner.com/radarek-blog/headers" />
    <link rel="alternate" type="application/atom+xml" title="Radarek bloguje... o Ruby - miniblog" href="http://feeds.feedburner.com/radarek-blog/miniblog" />
  </head>

  <body>
    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-837628-3']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ga);
      })();
    </script>
  
    <div id="top">
      <a href="/" id="return-to-main">&nbsp;</a>
      <h3 id="sentence">
        <q>Any fool can make things bigger, more complex, and more violent. It takes a touch of genius and a lot of courage to move in the opposite direction.</q>
        Albert Einstein
      </h3>

      <div id="title-image">
        <div id="ruby-logo"></div>
        <h1>o Ruby</h1>
      </div><!-- title-image -->

      <div id="navigation-tabs">
        <ul id="tabs">
          <li class="active"><a href="/"><span>Wpisy</span></a></li>
          <li><a href="http://radarek.jogger.pl/2007/04/29/o-blogu/"><span>O blogu</span></a></li>
          <li><a href="http://radarek.jogger.pl/2007/05/01/kanaly-rss/"><span>RSS</span></a></li>
          <li><a href="http://radarek.jogger.pl/2007/05/01/kontakt/"><span>Kontakt</span></a></li>
        </ul><!-- tabs -->
      </div><!-- navigations-tabs -->
    </div><!-- top -->

    <div id="top-shadow"></div>

    <div id="content-wrapper">

      <div id="menu">       
        <div class="submenu">
          <form action="/szukaj/" method="post" id="search">
            <fieldset>
              <h3>Szukaj</h3>

              <input class="text" type="text" value="" name="search" /><input class="submit" type="submit" value="Szukaj" />
            </fieldset>
          </form>
        </div>

        <div class="submenu">
          <h3>Subskrypcje RSS</h3>
          <a href="http://feeds.feedburner.com/radarek-blog"><img src="http://feeds.feedburner.com/~fc/radarek-blog?bg=000000&amp;fg=FFFFFF&amp;anim=0" height="26" width="88" style="border: 0; vertical-align: middle; margin: 0;" alt="" /></a> (pełne wpisy)
          <br />
          <span style="position: relative; left: 2em;">+</span>
          <br />
          <a href="http://feeds.feedburner.com/radarek-blog/headers"><img src="http://feeds.feedburner.com/~fc/radarek-blog/headers?bg=000000&amp;fg=FFFFFF&amp;anim=0" height="26" width="88" style="border: 0; vertical-align: middle; margin: 0;" alt="" /></a> (nagłówki)
        </div>

        <div class="submenu">
          <object width="200" height="300" type="application/x-shockwave-flash" data="http://www.blip.pl/widget.swf">
            <param name="movie" value="http://www.blip.pl/widget.swf" />
            <param name="quality" value="high"/>
            <param name="wmode" value="transparent" />
            <param name="flashvars" value="blip_user=radarek&amp;color_scheme=dark&amp;corner_radius=0&amp;"/>
          </object>
        </div>


        <div class="submenu">
          <h3>Miniblog</h3>
          
          <div class="miniblog-post">
            <h4><a class="title" href="http://radarek.jogger.pl/2009/01/01/gist-odpicowane-pastie/">Gist - odpicowane pastie</a></h4>
            01 Sty 2009
            <div class="">
              <p>
  <a href="http://gist.github.com">Gist</a> istnieje już jakiś czas, dopiero teraz przyglądnąłem się mu bliżej. Początkowo wydawało mi się, że to kolejny klon <a href="http://pastie.org">pastie</a>, ale szybko okazało się, że to coś więcej.
</p>

<p>
  Coś więcej ponieważ Gist, prócz tego co potrafi Pastie (edycja pliku online, kolorowanie składni, prywatne pliki), dodaje to co potrafi najlepiej - obsługa repozytoriów <a href="http://git-scm.com/">Git</a>. Otóż każde nowe "pastie" powoduje założenie repozytorium gita, które następnie możemy pobrać (clone), a także wysyłać do niego zmiany (push). Oczywiście nie jesteśmy ograniczeni do 1 pliku, możemy mieć ich tyle ile chcemy. Na stronie pokazywana jest historia rewizji. Dbałość o szczegóły jest firmowym znakiem serwisu <a href="http://github.com">GitHub</a>. Żegnaj Pastie, niech żyje Gist!
</p>

              
            </div><!-- post-body -->
          </div>
          
          <div class="miniblog-post">
            <h4><a class="title" href="http://radarek.jogger.pl/2008/10/12/mp3-przeboje/">Mp3 Przeboje</a></h4>
            12 Paź 2008
            <div class="">
              <a href="http://mp3przeboje.pl">http://mp3przeboje.pl/</a> to serwis dzięki, któremu możesz odsłuchać aktualne najciekawsze utwory muzyczne prosto z przeglądarki. Po prosty wybierz interesującą Cię listę przebojów (aktualnie 22 listy z różnych stacji radiowych) i słuchaj. Programiście projektu <a href="http://md6.org/">oki</a>emu należą się słowa uznania za staranność wykonania (serwis w zasadzie dopiero wystartował i ciągle się rozwija).
              
            </div><!-- post-body -->
          </div>
          
        </div>

        <div class="submenu">
          <h3>Narzędzia</h3>

          <ul id="tools">
            <li><a href="javascript:irb_console.toggle();">JRuby irb console</a></li>
          </ul>
        </div>

        <div class="submenu">
          <h3>Kategorie</h3>

          <ul id="categories">
          
            <li id="blog"><a href="http://radarek.jogger.pl/kategoria/blog/">Blog (6)</a></li>
          
            <li id="c"><a href="http://radarek.jogger.pl/kategoria/c/">C (1)</a></li>
          
            <li id="gamedev"><a href="http://radarek.jogger.pl/kategoria/gamedev/">Gamedev (1)</a></li>
          
            <li id="git"><a href="http://radarek.jogger.pl/kategoria/git/">Git (2)</a></li>
          
            <li id="humor"><a href="http://radarek.jogger.pl/kategoria/humor/">Humor (3)</a></li>
          
            <li id="java"><a href="http://radarek.jogger.pl/kategoria/java/">Java (1)</a></li>
          
            <li id="jruby"><a href="http://radarek.jogger.pl/kategoria/jruby/">JRuby (2)</a></li>
          
            <li id="miniblog"><a href="http://radarek.jogger.pl/kategoria/miniblog/">Miniblog (8)</a></li>
          
            <li id="narzedzia"><a href="http://radarek.jogger.pl/kategoria/narzedzia/">Narzędzia (7)</a></li>
          
            <li id="programowanie"><a href="http://radarek.jogger.pl/kategoria/programowanie/">Programowanie (7)</a></li>
          
            <li id="python"><a href="http://radarek.jogger.pl/kategoria/python/">Python (4)</a></li>
          
            <li id="ruby"><a href="http://radarek.jogger.pl/kategoria/ruby/">Ruby (37)</a></li>
          
            <li id="ruby_merb"><a href="http://radarek.jogger.pl/kategoria/ruby/merb/">Merb (2)</a></li>
          
            <li id="ruby_ruby-on-rails"><a href="http://radarek.jogger.pl/kategoria/ruby/ruby-on-rails/">Ruby on Rails (6)</a></li>
          
            <li id="techblog"><a href="http://radarek.jogger.pl/kategoria/techblog/">Techblog (36)</a></li>
          
            <li id="tips-tricks"><a href="http://radarek.jogger.pl/kategoria/tips-tricks/">Tips &amp; tricks (9)</a></li>
          
            <li id="web"><a href="http://radarek.jogger.pl/kategoria/web/">Web (2)</a></li>
          
          </ul>
        </div>

        <div class="submenu">
          <h3>Tagi</h3>
          
            <a class="catlvl0" href="http://radarek.jogger.pl/kategoria/blog/">Blog</a>
          
            <a class="catlvl0" href="http://radarek.jogger.pl/kategoria/c/">C</a>
          
            <a class="catlvl0" href="http://radarek.jogger.pl/kategoria/gamedev/">Gamedev</a>
          
            <a class="catlvl0" href="http://radarek.jogger.pl/kategoria/git/">Git</a>
          
            <a class="catlvl0" href="http://radarek.jogger.pl/kategoria/humor/">Humor</a>
          
            <a class="catlvl0" href="http://radarek.jogger.pl/kategoria/java/">Java</a>
          
            <a class="catlvl0" href="http://radarek.jogger.pl/kategoria/jruby/">JRuby</a>
          
            <a class="catlvl1" href="http://radarek.jogger.pl/kategoria/miniblog/">Miniblog</a>
          
            <a class="catlvl1" href="http://radarek.jogger.pl/kategoria/narzedzia/">Narzędzia</a>
          
            <a class="catlvl1" href="http://radarek.jogger.pl/kategoria/programowanie/">Programowanie</a>
          
            <a class="catlvl0" href="http://radarek.jogger.pl/kategoria/python/">Python</a>
          
            <a class="catlvl3" href="http://radarek.jogger.pl/kategoria/ruby/">Ruby</a>
          
            <a class="catlvl0" href="http://radarek.jogger.pl/kategoria/ruby/merb/">Merb</a>
          
            <a class="catlvl0" href="http://radarek.jogger.pl/kategoria/ruby/ruby-on-rails/">Ruby on Rails</a>
          
            <a class="catlvl3" href="http://radarek.jogger.pl/kategoria/techblog/">Techblog</a>
          
            <a class="catlvl1" href="http://radarek.jogger.pl/kategoria/tips-tricks/">Tips &amp; tricks</a>
          
            <a class="catlvl0" href="http://radarek.jogger.pl/kategoria/web/">Web</a>
          
        </div>

        <div class="submenu">
          <h3>Linki</h3>
          <ul id="links">
            <li><a href="http://mp3przeboje.pl/">mp3 przeboje</a></li>
            <li><a href="http://linuxlinki.md6.org/">Linux linki</a></li>
          </ul>
        </div>

        <div class="submenu">
          <h3>Archiwum</h3>
          <ul id="archives">
            
              <li><a href="/startid/470765">21.02.09-19.04.10
 (5)</a></li>
            
              <li><a href="/startid/433510">08.12.08-12.02.09
 (5)</a></li>
            
              <li><a href="/startid/425293">21.11.08-06.12.08
 (5)</a></li>
            
              <li><a href="/startid/423490">27.05.08-20.11.08
 (5)</a></li>
            
              <li><a href="/startid/392066">12.03.08-21.04.08
 (5)</a></li>
            
              <li><a href="/startid/383421">25.11.07-01.03.08
 (5)</a></li>
            
              <li><a href="/startid/364188">12.10.07-20.11.07
 (5)</a></li>
            
              <li><a href="/startid/337815">29.05.07-20.07.07
 (5)</a></li>
            
              <li><a href="/startid/323920">05.05.07-28.05.07
 (5)</a></li>
            
          </ul>
        </div>

      </div><!-- menu -->

      <div id="content">
        <div class="translation-info" style="display: none;">
          <script type="text/javascript" src="http://www.gmodules.com/ig/ifr?url=http://www.google.com/ig/modules/translatemypage.xml&amp;up_source_language=pl&amp;w=160&amp;h=60&amp;title=&amp;border=&amp;output=js"></script>
          <h4>Looking for english version of this blog?</h4>
          <p>
          Hello Stranger! This page is written in polish language and it looks like your is different than that.
          Currently I cannot afford english version of this page. The easiest way to (at least try) read this page on another language is to use automatic Google Translator. Thanks for visit!
          </p>
          <div style="clear: left;"></div>
        </div>

        <div style="margin-bottom: 1em;">
          <script type="text/javascript" id="AdTaily_Widget" src="http://static.adtaily.pl/widget.js#foobarbaz"></script>
          <noscript><p><a href="http://www.adtaily.pl">Skuteczna reklama na blogach sprzedawana za pomocą AdTaily</a>(PLALLADTAILY0002)</p></noscript>
        </div>

        <div class="post">

          <div class="post-header">
            <div class="post-date">
              <small>2007</small>
              <span>12</span>
              <small>Lip</small>
            </div><!-- post-date -->
            <h2 class="post-title"><a class="title" href="http://radarek.jogger.pl/2007/07/12/java-i-ruby-w-jednym-stali-domku/">Java i Ruby w jednym stali domku...</a></h2>
            
            <a href="http://radarek.jogger.pl/2007/07/12/java-i-ruby-w-jednym-stali-domku/#comments">10 komentarzy</a>
            | Kategorie:
            
              <a class="strong" href="http://radarek.jogger.pl/kategoria/jruby/">JRuby,</a>
            
              <a class="strong" href="http://radarek.jogger.pl/kategoria/ruby/">Ruby,</a>
            
              <a class="strong" href="http://radarek.jogger.pl/kategoria/techblog/">Techblog</a>
            
            
              | <a href="http://radarek.jogger.pl/2007/07/12/java-i-ruby-w-jednym-stali-domku/trackback/">trackback</a>
            
            

            
            <br />
              Tagi:
                
                  <a class="strong" href="http://technorati.com/tags/introduction" rel="tag">
                  introduction</a>
                
                  <a class="strong" href="http://technorati.com/tags/java" rel="tag">
                  java</a>
                
                  <a class="strong" href="http://technorati.com/tags/jruby" rel="tag">
                  jruby</a>
                
                  <a class="strong" href="http://technorati.com/tags/ruby" rel="tag">
                  ruby</a>
                
            
          </div><!-- post-header -->

          <div class="post-body">
            <h3>Ruby został zauważony</h3>
<p>
<img src="http://img520.imageshack.us/img520/5351/dukewithrubyinhandae0.png" class="entry-image" alt="java Duke with Ruby in hand" />
Programiści Rubiego zapewne śledzą losy tego języka na arenie międzynarodowej. Prawdopodobnie słyszeli o zainteresowaniu Rubym ze strony firmy Sun (tak, tak, to ta od Javy :-)), ostatnio także nawet Microsoft. Ci pierwsi zainwestowali w czołowych programistów projektu <a href="http://jruby.codehaus.org/">JRuby</a> - implementacji Rubiego w Javie. Ci drudzy <a href="http://www.infoq.com/news/2007/04/ms-ironruby">ogłosili pracę nad IronRuby</a>, który będzie wchodził w skład <a href="http://blogs.msdn.com/hugunin/archive/2007/04/30/a-dynamic-language-runtime-dlr.aspx">DLR (Dynamic Language Runtime)</a>, a to z kolei pozwoli na używanie go w <a href="http://silverlight.net">Silverlight</a>, nowym wynalazku tej firmy.
</p>


<p>
No dobrze, ale po co takie wielkie firmy, każde z nich dysponujące ogromnym arsenałem w postaci Javy i .Net, miałoby inwestować w Ruby? Otóż świat idzie do przodu, w tym wirtualnym świecie szczególnie, dlatego zmiany prędzej czy później są nieuniknione. Zapewne każdy z Was wie, że jeśli chodzi o języki programowania zmiany następują co kilka lat. Assembler, C, C++, Java to tylko niektóre języki, które wprowadzały świeżość, nową ściężkę rozwoju w IT. Jakkolwiek możnaby zaryzykować, że wspomniane języki zastępowały kolejno poprzedników (chociaż ciągle istniały obszary zastosowań, gdzie dany język był niezastąpiony), tak w tym przypadku musiałbym być głupcem by powiedzieć, że Ruby jest kolejnym takim językiem. Nie tym razem i prawdopodobnie nigdy już nie dojdzie do wielkiej zamiany. Za dużo rzeki w Wiśle upłynęło, za dużo systemów, bibliotek w istniejących językach napisano, za dużo programiści (a wraz z nimi firmy) zainwestowali w wiedzę o nich. "Right tools for right jobs", odpowiednie narzędzie do odpowiedniego zadania - myślę, że dzisiaj to jest kwestią wyboru. Nie da się dzisiaj wskazać (czy kiedykolwiek dało się?) jednego języka do wszystkiego, chodź nieraz próbowano.
</p>

<p>
Programiści innych technologii (tu Javy i .Net) zauważyli, że ich języki niekoniecznie są najlepsze w każdej sytuacji. Stąd zainteresowanie Rubym w postaci JRuby oraz IrobRuby, nowych implementacji tego języka. W tym artykule chciałbym skupić się na tej pierwszej, <a href="http://docs.codehaus.org/display/JRUBY/2007/06/12/JRuby+1.0+Released">gdyż niedawno światło ujrzała wersja 1.0 tej implementacji</a>.
</p>

<h3>Java + Ruby = ?</h3>
<img src="http://img70.imageshack.us/img70/8840/javarubyjrubyequationjv4.png" alt="Java + Ruby = JRuby" />

<p><a href="http://jruby.org">Na stronie domowej projektu</a> możemy przeczytać:</p>
<blockquote>
	<p>
	JRuby is an 100% pure-Java implementation of the Ruby programming language. <br />
	Features:
	</p>
	<ul id="jruby-features" class="classic">
	    <li>A 1.8.5 compatible Ruby interpreter written in 100% pure Java</li>
	    <li>Most builtin Ruby classes provided</li>
	    <li>Support for interacting with and defining java classes from within ruby</li>
	    <li>Bean Scripting Framework (BSF) support</li>
	    <li>Distributed under a tri-license (CPL/GPL/LGPL)</li>
	</ul>
</blockquote>

<p>
Czyli w wielkim skrócie JRuby to w 100% implementacja Rubiego w Javie, posiadająca większość wbudowanych klas w ten język. Połączenie tych języków pozwala na praktycznie dowolną interakcję, używanie kodu z jednego języka w drugim. Myślę, że nie ma większego sensu lać wody (chyba już wystarczająco dużo jej polałem ;)), najlepiej będzie zarzucić kilkoma przykładami.
</p>

<h3>Przykładowy kod</h3>
<p>
Użycie Javy w kodzie Rubiego, przykład pokazuje użycie klasy <a href="http://java.sun.com/javase/6/docs/api/java/util/Vector.html">java.util.Vector</a>
</p>

<pre><code class="ruby">require 'java'

include_class 'java.util.Vector'

vector = Vector.new
10.times {|i| vector.add(i) }

vector.each do |i|
	puts i
end
</code></pre>

<p>
Jakkolwiek kod jest bardzo prosty i nie trzeba go tłumaczyć, tak chciałbym zwrócić uwagę na pewne fragmenty. Po pierwsze, ponieważ jest to Ruby, tak obiekty powołujemy do życia tak jak do tej pory to robiliśmy, czyli <code>Vector.new</code>. Jakkolwiek to jest raczej oczywiste, tak kolejna rzecz już niekoniecznie. Chodzi o fragment <code>vector.each</code>. Skąd się wzięła metoda <code>each</code> w klasie <code>java.util.Vector</code>? Otóż pewne klasy Javy zostały wzbogacone o charakterystycznego dla Rubiego metody, tutaj <code>each</code>. Innymi takimi cukierkami są gettery i settery (np. getWidth, setWidth), które w Rubym można wywoływać, jako <code>obiekt.atrybut = wartość</code>, zamiast <code>obiekt.setAtrybut(wartość)</code>. Jakby tego jeszcze było mało, każdą metodę wPostaciWielbłądziej ze świata Javy, można wywoływać w postaci_znanej_ze_świata Rubiego. Możemy to zaobserwować na następnym listingu, który przedstawia proste gui z użyciem <a href="http://pl.wikipedia.org/wiki/Swing_(Java)">swing</a> (przycisk + listener):
</p>

<pre><code class="ruby">require 'java'

module Swing
	include_package 'javax.swing' #odpowiednik import javax.swing.* z javy, tutaj zamykamy dodatkowo import w module
	include_package 'java.awt.event'
	include_package 'java.awt'
end

class SimpleGui &lt; Swing::JFrame #dziedziczenie po klasie z Javy? nie ma problemu
	include Swing::ActionListener #tak implementuje się interfejs (implements ActionListener)

	def initialize(name)
		super(name) #wywołanie konstruktora z klasy rodzica
		@counter = 0
		set_size(300, 300) #zostanie wywołana metoda setSize (sic!)
		set_default_close_operation(Swing::JFrame::EXIT_ON_CLOSE)
		button = Swing::JButton.new("Click me!")
		button.add_action_listener(self) #podobnie jak wyżej, wywołana zostanie metoda addActionListener
		add(button, Swing::BorderLayout::SOUTH)
	end
	
	def actionPerformed(event)
		button = event.get_source
		@counter += 1
		button.text = "Clicked #{@counter} times"
	end	
end

frame = SimpleGui.new("Swing from JRuby!")
frame.visible = true #a tutaj wywołujemy frame.setVisible(true)
</code></pre>

<p>
To były przykłady wykorzystania klas Javy w Rubym. Zanim przejdę do kolejnych przykładów chciałbym zwrócić uwagę na dość istotny fakt. Otóż zgodnie z "principle of least surprise" mamy zapewnioną automatyczną konwersję przekazywanych parametrów. Konwersja działa w obu kierunkach. Przykładowo w ostatnim listingu mamy <code>SimpleGui.new("Swing from JRuby!")</code>, a co zatem idzie przekazujemy jako parametr string. No tak, ale jest to string z Rubiego, a Java operuje na stringach klasy <code>java.lang.String</code>. Jednak o odpowiednią konwersję zadba już całe środowisko JRuby, także o większość takich sytuacji po prostu nie musimy się martwić. <br />
</p>

<p>
Chciałbym teraz pokazać wykorzystanie kodu Rubiego bezpośrednio w kodzie Javy. Nie jest to jednak takie proste jak dotychczas było. Otóż istnienie obiektów Javy w świecie Rubiego jest dużo prostsze niż w odwrotnym przypadku. Aby nie wnikać w szczegóły zwrócę tylko uwagę na to, że każdy obiekt Javy ma interfejs określony przez jego klasę. W Rubym jest to po części prawdą, ale podczas wywoływania metody nie jest sprawdzany typ (klasa) obiektu, a sam fakt istnienia metody. Zatem pisząc <code>obiekt.metoda(3)</code> dopiero podczas wykonywania kodu zostanie wykonane sprawdzenie obiektu czy posiada odpowiednią metodę. W Javie natomiast nie możemy sobie pisać w ten sposób, gdyż zostanie to już wyłapane na poziomie kompilacji. Poprzestanę zatem na prostych przykładach, tym bardziej, że nie jest to tutorial JRubiego, a tylko wprowadzenie w to środowisko. A oto przykłady:
</p>

<pre><code class="java">/*
 * Przykład pokazuje użycie funkcji evalScript, która służy do interpretowania kodu Rubiego
 */
import org.jruby.Ruby;

public class RubyInsideJava01 {
    public static void main(String[] args) {
        Ruby rubyRuntime = Ruby.getDefaultInstance();
        rubyRuntime.evalScript("puts 'Hello World!'");
    }
}

</code></pre>

<p>
Kolejny przykład pokazuje jak wykorzystać kod napisany w Rubym  (plik my_class.rb) w kodzie Javy. Zatem najpierw prosta klasa w Rubym:
</p>

<pre><code class="ruby">#prosta klasa, którą wykorzystamy w kodzie Javy
class MyClass
	def say_hello
		puts "MyClass instance says hello"
	end
	
	def name
		return "My name is: #{self.class.name}"
	end
end
</code></pre>

<p>
...i wykorzystanie jej w Javie:
</p>

<pre><code class="java">/*
 * Przykład pokazuje użycie własnej klasy z Rubiego w kodzie Javy.
 * Należy zwrócić uwagę, że zwrócony obiekt po stronie Javy będzie widoczny jako IRubyObject, zatem
 * aby wykonać operacje na tym obiekcie musimy korzystać z interfejsu tej klasy.
 */
import java.io.File;
import org.jruby.Ruby;
import org.jruby.runtime.builtin.IRubyObject;

public class RubyInsideJava02 {
    public static void main(String[] args) {
        Ruby rubyRuntime = Ruby.getDefaultInstance();
        rubyRuntime.loadFile(new File("my_class.rb"));
        IRubyObject object = rubyRuntime.evalScript("MyClass.new");
        System.out.println(object.getMetaClass());
        object.callMethod(rubyRuntime.getCurrentContext(), "say_hello");
        System.out.println(object.callMethod(rubyRuntime.getCurrentContext(), "name"));
    }
}
</code></pre>

<p>
Te kilka przykładów dają pewien obraz możliwości i na tym poprzestanę, gdyż tak jak wspomniałem artykuł ten nie jest tutorialem. Chciałbym jeszcze, abyśmy na koniec zastanowili się jakie dodatkowe korzyści płyną dzięki istnieniu JRubiego. Myślę, że są to: 
</p>

<ul class="classic">
<li>natywna obsługa wątków (czyste wątki Javy, a nie green threads)</li>
<li>możliwość wykorzystania całego API Javy, większość Rubiego (nistety nie tam gdzie użyto rozszerzeń języka C) co w praktyce ogromnie zwiększa możliwości Rubiego (przykładowo Ruby ma ogromną lukę w kwestii tworzenia dobrych GUI, teraz jest Swing)</li>
<li>Ruby zyskuje wszystkie pozytywne aspekty JVM (a także te negatywne;))</li>
<li>łatwiejsza integracja istniejących, dużych systemów (np. korporacyjnych) z nowo powstającymi (np. Ruby on Rails jako frontend), a co za tym bardzo realne przebicie się w kuluary magicznych aplikacji "enterprise"</li>
<li>deploy aplikacji JRuby w postaci pliku .war</li>
<li>umożliwienie łagodnego zagłębienia w świat Rubiego programistów Javy (czyli piszę w Rubym, ale korzystam z API Javy)</li>
<li>w jakimś sensie połączenie community obu języków?</li>
<li>inne, jakie?</li>
</ul>

<h3>Werdykt</h3>
<p>
A więc co mógłbym napisać na sam koniec? Tak, to bardzo ważny projekt dla Rubiego i jego community. Myślę, że odegra (a już powoli zaczyna) bardzo ważną rolę. W niedługim czasie powinniśmy usłyszeć o wielu rozwiązaniach wykorzystujących ten projekt. A teraz dajmy szansę i spróbujmy napisać coś ciekawego wykorzystując go w swoim projekcie. Do dzieła!
</p>

<img src="http://img529.imageshack.us/img529/4900/dukewithrubyax7.png" alt="Duke recommends JRuby" />

<p>
Wszystkie kody źródłowe z tego artykułu można pobrać ze strony <a href="http://radarek.pl/-/jruby/getting-started/">http://radarek.pl/-/jruby/getting-started/</a>.
</p>
          </div><!-- post-body -->
        </div><!-- post -->
        <div class="separator"></div>
        
        <div class="wykop" style="padding: 1px;" >
          <p style="margin-top: 10px;">
          Jeśli spodobał Ci się wpis to może umieścisz ten blog w swoim czytniku RSS?
          </p>
        </div>
        <div style="clear: left;"></div>

        

        
        <h3>Komentarze</h3>
        

        <div id="comments">
        
          <div id="comment-888692" class="comment1 jogger">
            
            1.
            
            <img class="avatar-icon" src="http://gim.jogger.pl/files/favicon.png" alt="avatar icon" />
            
            
            <strong><a href="http://gim.jogger.pl">G</a></strong> napisał(a) 12 Lip 2007 o godz. 17:13:
            <div class="top"></div>
            <div class="content">
              <p>nie programuję w Rubym, mimo to bardzo ciekawy wpis. o ile wykorzystanie Javy w Rubym wygląda całkiem zgrabnie, o tyle w drugą stronę, wygląda na straszną kaszę ;/<br />
chyba kolejny wpis z twojego jogga, który mi się podoba, chyba czas, żeby kliknąć w rssy ;)</p>
            </div>
            <div class="footer"></div>
          </div>
        
          <div id="comment-888713" class="comment2 guest">
            
            2.
            
            
            <img class="avatar-icon" src="/files/default-avatar-icon.png" alt="avatar icon" />
            
            <strong>PJ</strong> napisał(a) 12 Lip 2007 o godz. 18:02:
            <div class="top"></div>
            <div class="content">
              <p>To ja dodam, że niedawno był w Krakowie jeden z twórców JRuby-ego: <a href="http://ola-bini.blogspot.com" rel="nofollow" >Ola Bini</a> i w ramach <a href="http://www.sfi.org.pl" rel="nofollow" >Studenckiego Festiwalu Informatycznego</a> mówił właśnie na jego temat. Niestety wbrew zapowiedziom organizatorów nagrania wykładów ciągle nie są dostępne, więc spragnieni wiedzy mogą jedynie poczytać komentarze na temat tego wykładu. Z <a href="http://www.holewa.org/archives/12" rel="nofollow" >jednego z nich</a> można się dowiedzieć, że Ola Bini daje Ruby`emu jeszcze 2-3 lata. :-)</p>

<p><sub>A tak na marginesie, to strona radarek.pl jest moją ulubioną od wielu wielu lat i mam nadzieję, że nieustannie będzie tak samo interesująca :-D</sub></p>
            </div>
            <div class="footer"></div>
          </div>
        
          <div id="comment-888770" class="comment1 jogger">
            
            3.
            
            <img class="avatar-icon" src="http://mcv.jogger.pl/files/favicon.png" alt="avatar icon" />
            
            
            <strong><a href="http://mcv.jogger.pl">mcv</a></strong> napisał(a) 12 Lip 2007 o godz. 19:35:
            <div class="top"></div>
            <div class="content">
              <p>Hmm… co prawda nie programuję w Javie, ale pomysł wygląda na świetny. Jestem pewien, że Ruby zyska dzięki niemu na popularności u „zwykłych” programistów. :D</p>
            </div>
            <div class="footer"></div>
          </div>
        
          <div id="comment-889043" class="comment2 owner">
            
            4.
            
            <img class="avatar-icon" src="http://radarek.jogger.pl/files/favicon.png" alt="avatar icon" />
            
            
            <strong><a href="http://radarek.jogger.pl">Radarek</a></strong> napisał(a) 12 Lip 2007 o godz. 23:33:
            <div class="top"></div>
            <div class="content">
              <p><strong>@G</strong> faktycznie, korzystanie w Javie w ten sposób z kodu Rubiego jest kiepskie, postaram się jednak w najbliższej przyszłości napisać coś więcej o JRuby, ale tym razem bardziej tutorialowo i mam nadzieję uda mi się pokazać inny, dużo ładniejszy sposób. Co do RSSów to jak najbardziej zachęcam :).</p>

<p><strong>@peterjan</strong> oglądałem kilka filmików z wykładów Ola Bini, czytam jego bloga i takie słowa to mógł tylko powiedzieć po kilku piwach :)</p>
            </div>
            <div class="footer"></div>
          </div>
        
          <div id="comment-889314" class="comment1 guest">
            
            5.
            
            
            <img class="avatar-icon" src="/files/default-avatar-icon.png" alt="avatar icon" />
            
            <strong><a href="http://jabba.pl/seban" rel="nofollow">Seban</a></strong> napisał(a) 13 Lip 2007 o godz. 13:21:
            <div class="top"></div>
            <div class="content">
              <p>ja muszę się przyznać, że na tej stronie widziałem poraz pierwszy jakieś przykłady związane z JRuby, no i wydaje się ciekawe.  Chociaż póki co nie widzę miejsca gdzie mógłbym to używać.</p>
            </div>
            <div class="footer"></div>
          </div>
        
          <div id="comment-889318" class="comment2 owner">
            
            6.
            
            <img class="avatar-icon" src="http://radarek.jogger.pl/files/favicon.png" alt="avatar icon" />
            
            
            <strong><a href="http://radarek.jogger.pl">Radarek</a></strong> napisał(a) 13 Lip 2007 o godz. 13:28:
            <div class="top"></div>
            <div class="content">
              <p><strong>@Seban</strong> tak, na tym blogu JRuby pojawia się po raz pierwszy, ale myślę, że nie ostatni. Co do zastosowań JRubiego to postaram się skrobnąć coś o tym więcej w jednym z kolejnych wpisów.</p>
            </div>
            <div class="footer"></div>
          </div>
        
          <div id="comment-890054" class="comment1 jogger">
            
            7.
            
            <img class="avatar-icon" src="http://bmalkow.malkowscy.net/files/favicon.png" alt="avatar icon" />
            
            
            <strong><a href="http://bmalkow.malkowscy.net">bmalkow</a></strong> napisał(a) 14 Lip 2007 o godz. 08:11:
            <div class="top"></div>
            <div class="content">
              <p>No to może jeszcze to kogoś zaciekawi http://code.google.com/p/xruby/ ?<br />
Nic o tym, niestety, nie powiem bo jeszcze nie używałem :-)</p>
            </div>
            <div class="footer"></div>
          </div>
        
          <div id="comment-958254" class="comment2 guest">
            
            8.
            
            
            <img class="avatar-icon" src="/files/default-avatar-icon.png" alt="avatar icon" />
            
            <strong>Charles Oliver Nutter</strong> napisał(a) 23 Wrz 2007 o godz. 17:57:
            <div class="top"></div>
            <div class="content">
              <p>Hey, I hope it&#8217;s ok, but I&#8217;m going to use your Duke With Ruby image in a JRuby talk tomorrow. It looks great!</p>
            </div>
            <div class="footer"></div>
          </div>
        
          <div id="comment-958396" class="comment1 owner">
            
            9.
            
            <img class="avatar-icon" src="http://radarek.jogger.pl/files/favicon.png" alt="avatar icon" />
            
            
            <strong><a href="http://radarek.jogger.pl">Radarek</a></strong> napisał(a) 23 Wrz 2007 o godz. 19:47:
            <div class="top"></div>
            <div class="content">
              <p>Hey Charles. Of course You can. This image was made by me from two images which I found on the internet. Thanks for all your works on JRuby!</p>
            </div>
            <div class="footer"></div>
          </div>
        
          <div id="comment-1213011" class="comment2 guest">
            
            10.
            
            
            <img class="avatar-icon" src="/files/default-avatar-icon.png" alt="avatar icon" />
            
            <strong>ide dla jruby i javy ?</strong> napisał(a) 14 Lip 2008 o godz. 13:34:
            <div class="top"></div>
            <div class="content">
              <p>hej, mógłbyś polecić jakieś dobre <span class="caps">IDE</span> dla jruby i javy ? Np. w tym przykładzie ze Swinga który podajesz czy jakieś <span class="caps">IDE</span> podpowie mi składnie ? No wiesz, ja napisze &#8222;set_&#8221; CTRL+<span class="caps">SPACJA</span> a <span class="caps">IDE</span> podpowie opcje.</p>

<p>bede wdzieczny za podpowiedź<br />
Tomek</p>
            </div>
            <div class="footer"></div>
          </div>
        
        </div><!-- comments -->

        

        

        

        
        <h3>Musisz się zalogować, jeśli chcesz dodać komentarz.</h3>
        
      </div><!-- content -->

      <div class="cleaner"></div>

    </div><!-- content-wrapper -->

    <div id="footer" style="clear: both;">
    <div id="footer-shadow"></div>
        <h3>Czytelnicy</h3>
        <script type="text/javascript" src="http://pub.mybloglog.com/comm2.php?mblID=2007050116063791&amp;c_width=800&amp;c_sn_opt=n&amp;c_rows=3&amp;c_img_size=f&amp;c_heading_text=&amp;c_color_heading_bg=FFFFFF&amp;c_color_heading=000000&amp;c_color_link_bg=FFFFFF&amp;c_color_link=000000&amp;c_color_bottom_bg=FFFFFF"></script>
      <div id="bottom-para">
        <p>
          &copy; 2007-2010, Radarek bloguje. Graphics, css, xhtml, javascript code by <a href="/">Radarek</a>
          | <a href="http://validator.w3.org/check/referer">Valid XHTML 1.0 Strict</a>
          | <a href="http://jigsaw.w3.org/css-validator/check/referer">Valid CSS</a>
        </p>
      </div>
    </div><!-- footer -->

    <div id="jruby-irb-console" style="display: none;">
      <div class="overlay">
        <div class="window">
          <div class="inner">
            <a class="close-popup" href="#">Zamknij</a>
            <div class="irb-console-applet">
            </div>
          </div>
        </div>
      </div>
    </div>
    <!--</div>-->
  </body>
</html>