<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="pl" xml:lang="pl">
  <head>
    <title>Nowości i zmiany w Ruby 1.9 #1 - ordered Hash - Radarek bloguje... o Ruby</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="verify-v1" content="XvR5kxyBmJGgUb1Tca8kJ+ii1Vde81UrpDJptt6JMeU=" />
    <link rel="shortcut icon" href="../../../../files/favicon.png" type="image/png" />
    <meta name="keywords" content="1.9, ruby, ruby1.9, Ruby, Techblog, , ruby, ruby on rails, rails, merb, jruby, yarv, rubinius, ironruby, maglev, programowanie, radarek, radosław bułat, radoslaw bulat, radoslaw, bulat, python, gamedev" />
    <meta name="description" content="Wszystko co wiem o programowaniu, przede wszystkim Ruby." />
    <meta name="robots" content="index,follow"/>

    <link rel="stylesheet" href="../../../../files/style.css" type="text/css" />
    <!--[if lte IE 6]><link rel="stylesheet" href="/files/style-ie6.css" type="text/css" /><![endif]-->
    <!--[if IE 7]><link rel="stylesheet" type="text/css" href="/files/style-ie7.css" /><![endif]-->

    <!--<script type="text/javascript" src="/files/jquery.js"></script>-->
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
    <script type="text/javascript" src="../../../../files/common.js"></script>
    <script type="text/javascript" src="../../../../files/highlight.js"></script>
    <script type="text/javascript" src="../../../../files/dynamic.js"></script>
    <script type="text/javascript" src="../../../../files/jruby.js"></script>
		
    
    <script type="text/javascript">
      hljs.initHighlightingOnLoad('ruby');
    </script>
    
    <!--[if lt IE 7.]><script defer type="text/javascript" src="/files/pngfix.js"></script><![endif]-->

    <link rel="alternate" type="application/atom+xml" title="Radarek bloguje... o Ruby - wpisy" href="http://feeds.feedburner.com/radarek-blog" />
    <link rel="alternate" type="application/atom+xml" title="Radarek bloguje... o Ruby - nagłówki" href="http://feeds.feedburner.com/radarek-blog/headers" />
    <link rel="alternate" type="application/atom+xml" title="Radarek bloguje... o Ruby - miniblog" href="http://feeds.feedburner.com/radarek-blog/miniblog" />
  </head>

  <body>
    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-837628-3']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ga);
      })();
    </script>
  
    <div id="top">
      <a href="../../../../index.html" id="return-to-main">&nbsp;</a>
      <h3 id="sentence">
        <q>Any fool can make things bigger, more complex, and more violent. It takes a touch of genius and a lot of courage to move in the opposite direction.</q>
        Albert Einstein
      </h3>

      <div id="title-image">
        <div id="ruby-logo"></div>
        <h1>o Ruby</h1>
      </div><!-- title-image -->

      <div id="navigation-tabs">
        <ul id="tabs">
          <li class="active"><a href="../../../../index.html"><span>Wpisy</span></a></li>
          <li><a href="../../../../2007/04/29/o-blogu/index.html"><span>O blogu</span></a></li>
          <li><a href="../../../../2007/05/01/kanaly-rss/index.html"><span>RSS</span></a></li>
          <li><a href="../../../../2007/05/01/kontakt/index.html"><span>Kontakt</span></a></li>
        </ul><!-- tabs -->
      </div><!-- navigations-tabs -->
    </div><!-- top -->

    <div id="top-shadow"></div>

    <div id="content-wrapper">

      <div id="menu">       
        <div class="submenu">
          <form action="http://radarek.jogger.pl/szukaj/" method="post" id="search">
            <fieldset>
              <h3>Szukaj</h3>

              <input class="text" type="text" value="" name="search" /><input class="submit" type="submit" value="Szukaj" />
            </fieldset>
          </form>
        </div>

        <div class="submenu">
          <h3>Subskrypcje RSS</h3>
          <a href="http://feeds.feedburner.com/radarek-blog"><img src="http://feeds.feedburner.com/~fc/radarek-blog?bg=000000&amp;fg=FFFFFF&amp;anim=0" height="26" width="88" style="border: 0; vertical-align: middle; margin: 0;" alt="" /></a> (pełne wpisy)
          <br />
          <span style="position: relative; left: 2em;">+</span>
          <br />
          <a href="http://feeds.feedburner.com/radarek-blog/headers"><img src="http://feeds.feedburner.com/~fc/radarek-blog/headers?bg=000000&amp;fg=FFFFFF&amp;anim=0" height="26" width="88" style="border: 0; vertical-align: middle; margin: 0;" alt="" /></a> (nagłówki)
        </div>

        <div class="submenu">
          <object width="200" height="300" type="application/x-shockwave-flash" data="http://www.blip.pl/widget.swf">
            <param name="movie" value="http://www.blip.pl/widget.swf" />
            <param name="quality" value="high"/>
            <param name="wmode" value="transparent" />
            <param name="flashvars" value="blip_user=radarek&amp;color_scheme=dark&amp;corner_radius=0&amp;"/>
          </object>
        </div>


        <div class="submenu">
          <h3>Miniblog</h3>
          
          <div class="miniblog-post">
            <h4><a class="title" href="../../../../2009/01/01/gist-odpicowane-pastie/index.html">Gist - odpicowane pastie</a></h4>
            01 Sty 2009
            <div class="">
              <p>
  <a href="http://gist.github.com">Gist</a> istnieje już jakiś czas, dopiero teraz przyglądnąłem się mu bliżej. Początkowo wydawało mi się, że to kolejny klon <a href="http://pastie.org">pastie</a>, ale szybko okazało się, że to coś więcej.
</p>

<p>
  Coś więcej ponieważ Gist, prócz tego co potrafi Pastie (edycja pliku online, kolorowanie składni, prywatne pliki), dodaje to co potrafi najlepiej - obsługa repozytoriów <a href="http://git-scm.com/">Git</a>. Otóż każde nowe "pastie" powoduje założenie repozytorium gita, które następnie możemy pobrać (clone), a także wysyłać do niego zmiany (push). Oczywiście nie jesteśmy ograniczeni do 1 pliku, możemy mieć ich tyle ile chcemy. Na stronie pokazywana jest historia rewizji. Dbałość o szczegóły jest firmowym znakiem serwisu <a href="http://github.com">GitHub</a>. Żegnaj Pastie, niech żyje Gist!
</p>

              
            </div><!-- post-body -->
          </div>
          
          <div class="miniblog-post">
            <h4><a class="title" href="../../../10/12/mp3-przeboje/index.html">Mp3 Przeboje</a></h4>
            12 Paź 2008
            <div class="">
              <a href="http://mp3przeboje.pl">http://mp3przeboje.pl/</a> to serwis dzięki, któremu możesz odsłuchać aktualne najciekawsze utwory muzyczne prosto z przeglądarki. Po prosty wybierz interesującą Cię listę przebojów (aktualnie 22 listy z różnych stacji radiowych) i słuchaj. Programiście projektu <a href="http://md6.org/">oki</a>emu należą się słowa uznania za staranność wykonania (serwis w zasadzie dopiero wystartował i ciągle się rozwija).
              
            </div><!-- post-body -->
          </div>
          
        </div>

        <div class="submenu">
          <h3>Narzędzia</h3>

          <ul id="tools">
            <li><a href="javascript:irb_console.toggle();">JRuby irb console</a></li>
          </ul>
        </div>

        <div class="submenu">
          <h3>Kategorie</h3>

          <ul id="categories">
          
            <li id="blog"><a href="../../../../kategoria/blog/index.html">Blog (6)</a></li>
          
            <li id="c"><a href="../../../../kategoria/c/index.html">C (1)</a></li>
          
            <li id="gamedev"><a href="../../../../kategoria/gamedev/index.html">Gamedev (1)</a></li>
          
            <li id="git"><a href="../../../../kategoria/git/index.html">Git (2)</a></li>
          
            <li id="humor"><a href="../../../../kategoria/humor/index.html">Humor (3)</a></li>
          
            <li id="java"><a href="../../../../kategoria/java/index.html">Java (1)</a></li>
          
            <li id="jruby"><a href="../../../../kategoria/jruby/index.html">JRuby (2)</a></li>
          
            <li id="miniblog"><a href="../../../../kategoria/miniblog/index.html">Miniblog (8)</a></li>
          
            <li id="narzedzia"><a href="../../../../kategoria/narzedzia/index.html">Narzędzia (7)</a></li>
          
            <li id="programowanie"><a href="../../../../kategoria/programowanie/index.html">Programowanie (7)</a></li>
          
            <li id="python"><a href="../../../../kategoria/python/index.html">Python (4)</a></li>
          
            <li id="ruby"><a href="../../../../kategoria/ruby/index.html">Ruby (37)</a></li>
          
            <li id="ruby_merb"><a href="../../../../kategoria/ruby/merb/index.html">Merb (2)</a></li>
          
            <li id="ruby_ruby-on-rails"><a href="../../../../kategoria/ruby/ruby-on-rails/index.html">Ruby on Rails (6)</a></li>
          
            <li id="techblog"><a href="../../../../kategoria/techblog/index.html">Techblog (36)</a></li>
          
            <li id="tips-tricks"><a href="../../../../kategoria/tips-tricks/index.html">Tips &amp; tricks (9)</a></li>
          
            <li id="web"><a href="../../../../kategoria/web/index.html">Web (2)</a></li>
          
          </ul>
        </div>

        <div class="submenu">
          <h3>Tagi</h3>
          
            <a class="catlvl0" href="../../../../kategoria/blog/index.html">Blog</a>
          
            <a class="catlvl0" href="../../../../kategoria/c/index.html">C</a>
          
            <a class="catlvl0" href="../../../../kategoria/gamedev/index.html">Gamedev</a>
          
            <a class="catlvl0" href="../../../../kategoria/git/index.html">Git</a>
          
            <a class="catlvl0" href="../../../../kategoria/humor/index.html">Humor</a>
          
            <a class="catlvl0" href="../../../../kategoria/java/index.html">Java</a>
          
            <a class="catlvl0" href="../../../../kategoria/jruby/index.html">JRuby</a>
          
            <a class="catlvl1" href="../../../../kategoria/miniblog/index.html">Miniblog</a>
          
            <a class="catlvl1" href="../../../../kategoria/narzedzia/index.html">Narzędzia</a>
          
            <a class="catlvl1" href="../../../../kategoria/programowanie/index.html">Programowanie</a>
          
            <a class="catlvl0" href="../../../../kategoria/python/index.html">Python</a>
          
            <a class="catlvl3" href="../../../../kategoria/ruby/index.html">Ruby</a>
          
            <a class="catlvl0" href="../../../../kategoria/ruby/merb/index.html">Merb</a>
          
            <a class="catlvl0" href="../../../../kategoria/ruby/ruby-on-rails/index.html">Ruby on Rails</a>
          
            <a class="catlvl3" href="../../../../kategoria/techblog/index.html">Techblog</a>
          
            <a class="catlvl1" href="../../../../kategoria/tips-tricks/index.html">Tips &amp; tricks</a>
          
            <a class="catlvl0" href="../../../../kategoria/web/index.html">Web</a>
          
        </div>

        <div class="submenu">
          <h3>Linki</h3>
          <ul id="links">
            <li><a href="http://mp3przeboje.pl/">mp3 przeboje</a></li>
            <li><a href="http://linuxlinki.md6.org/">Linux linki</a></li>
          </ul>
        </div>

        <div class="submenu">
          <h3>Archiwum</h3>
          <ul id="archives">
            
              <li><a href="../../../../startid/470765.html">21.02.09-19.04.10
 (5)</a></li>
            
              <li><a href="../../../../startid/433510.html">08.12.08-12.02.09
 (5)</a></li>
            
              <li><a href="../../../../startid/425293.html">21.11.08-06.12.08
 (5)</a></li>
            
              <li><a href="../../../../startid/423490.html">27.05.08-20.11.08
 (5)</a></li>
            
              <li><a href="../../../../startid/392066.html">12.03.08-21.04.08
 (5)</a></li>
            
              <li><a href="../../../../startid/383421.html">25.11.07-01.03.08
 (5)</a></li>
            
              <li><a href="../../../../startid/364188.html">12.10.07-20.11.07
 (5)</a></li>
            
              <li><a href="../../../../startid/337815.html">29.05.07-20.07.07
 (5)</a></li>
            
              <li><a href="../../../../startid/323920.html">05.05.07-28.05.07
 (5)</a></li>
            
          </ul>
        </div>

      </div><!-- menu -->

      <div id="content">
        <div class="translation-info" style="display: none;">
          <script type="text/javascript" src="http://www.gmodules.com/ig/ifr?url=http://www.google.com/ig/modules/translatemypage.xml&amp;up_source_language=pl&amp;w=160&amp;h=60&amp;title=&amp;border=&amp;output=js"></script>
          <h4>Looking for english version of this blog?</h4>
          <p>
          Hello Stranger! This page is written in polish language and it looks like your is different than that.
          Currently I cannot afford english version of this page. The easiest way to (at least try) read this page on another language is to use automatic Google Translator. Thanks for visit!
          </p>
          <div style="clear: left;"></div>
        </div>

        <div style="margin-bottom: 1em;">
          <script type="text/javascript" id="AdTaily_Widget" src="http://static.adtaily.pl/widget.js#foobarbaz"></script>
          <noscript><p><a href="http://www.adtaily.pl">Skuteczna reklama na blogach sprzedawana za pomocą AdTaily</a>(PLALLADTAILY0002)</p></noscript>
        </div>

        <div class="post">

          <div class="post-header">
            <div class="post-date">
              <small>2008</small>
              <span>30</span>
              <small>Lis</small>
            </div><!-- post-date -->
            <h2 class="post-title"><a class="title" href="index.html">Nowości i zmiany w Ruby 1.9 #1 - ordered Hash</a></h2>
            
            <a href="index.html#comments">16 komentarzy</a>
            | Kategorie:
            
              <a class="strong" href="../../../../kategoria/ruby/index.html">Ruby,</a>
            
              <a class="strong" href="../../../../kategoria/techblog/index.html">Techblog</a>
            
            
              | <a href="trackback/index.html">trackback</a>
            
            

            
            <br />
              Tagi:
                
                  <a class="strong" href="http://technorati.com/tags/1.9" rel="tag">
                  1.9</a>
                
                  <a class="strong" href="http://technorati.com/tags/ruby" rel="tag">
                  ruby</a>
                
                  <a class="strong" href="http://technorati.com/tags/ruby1.9" rel="tag">
                  ruby1.9</a>
                
            
          </div><!-- post-header -->

          <div class="post-body">
            <div class="info">
  <img src="http://img150.imageshack.us/img150/3792/ruby19approvedhf8.jpg" style="float: left; margin: 0 1em 0 0; " alt="ruby 1.9 changes approved - logo" />
  <p>
  Wpis ten jest jedną z części cyklu pt "Nowości i zmiany w Ruby 1.9". Pełną listę wpisów znajdziesz pod adresem <a href="../nowosci-i-zmiany-w-ruby-1-9/index.html">http://radarek.jogger.pl/2008/11/30/nowosci-i-zmiany-w-ruby-1-9/</a>.
  </p>
  <span style="display: block; clear: left;"></span>
</div>

<p>
Od wersji 1.9 Ruby zachowuje kolejność elementów w Hashu ("ordered Hash", czyli Hash zachowujący kolejność). Oznacza to, że iteracja po elementach hasha następuje dokładnie w takiej samej kolejności w jakiej były <strong>wstawiane elementy</strong>. Podkreślam słowo <strong>"wstawiane"</strong>, co nie ma związku z sortowaniem kluczy (np. leksykograficznie).
</p>



<p>
Poniższy kod pokazuje różnicę między 1.8 i 1.9.
</p>

<pre><code class="ruby">h = {&quot;c&quot; =&gt; 3, &quot;a&quot; =&gt; 1, &quot;b&quot; =&gt; 2}
h.each do |k, v|
  p [k, v]
end
</code></pre>

<h3>1.8</h3>
<pre>$ ruby1.8 -v &amp;&amp; ruby1.8 ordered_hash01.rb 
ruby 1.8.7 (2008-08-11 patchlevel 72) [x86_64-linux]
["a", 1]
["b", 2]
["c", 3]
</pre>

<h3>1.9</h3>
<pre>$ ruby1.9.1 -v &amp;&amp; ruby1.9.1 ordered_hash01.rb 
ruby 1.9.1 (2008-11-30 revision 20428) [x86_64-linux]
["c", 3]
["a", 1]
["b", 2]
</pre>
</p>

<p>
Kolejność kluczy nie zmienia się gdy nadpisujemy istniejący element. Jeśli tego chcemy musimy najpierw usunąć stary klucz i dodać go jeszcze raz. Obrazuje to poniższy przykład.
</p>

<pre><code class="ruby">h = {}
h[&quot;a&quot;] = &quot;foo&quot;
h[&quot;b&quot;] = &quot;bar&quot;
p h
# {&quot;a&quot;=&gt;&quot;foo&quot;, &quot;b&quot;=&gt;&quot;bar&quot;}

h[&quot;a&quot;] = nil
p h
# {&quot;a&quot;=&gt;nil, &quot;b&quot;=&gt;&quot;bar&quot;}

h.delete(&quot;a&quot;)
h[&quot;a&quot;] = &quot;foo&quot;
p h
# {&quot;b&quot;=&gt;&quot;bar&quot;, &quot;a&quot;=&gt;&quot;foo&quot;}
</code></pre>

<p>
Jeśli chodzi o kwestię wydajności to zapamiętywanie kolejności kluczy ponosi za sobą dosyć niewielki koszt. W kwestii pamięci są to jedynie dwa wskaźniki przypadające na jeden element hasha (by pamiętać następny i poprzedni). Koszt operacji dodawania/usuwania wzrósł o koszt dodania/usunięcia takiego elementu z listy dwukierunkowej mając już wskaźnik do niego. Jest to zatem kwestia kilku "przepięć" wskaźników (złożoność O(1)).
</p>

<h3>Praktyczne użycie</h3>
<p>
Przykładowo implementując model w RoR/Merb chcemy definiować tłumaczenie dla nazw jakiegoś wyliczeniowego atrybutu (np. status). Mogłoby to wyglądać tak:
</p>

<pre><code class="ruby"># model
class User
  STATUS_LABELS = {
    &quot;active&quot;    =&gt; &quot;aktywny&quot;,
    &quot;deleted&quot;   =&gt; &quot;usunięty&quot;
  }
end

# widok
&lt;%= select :user, :status, User::STATUS_LABELS %&gt;
</code></pre>

<p>
Dzięki temu, że kolejność kluczy jest zapamiętywana lista wyboru wyświetli elementy w takiej samej kolejności.
</p>
          </div><!-- post-body -->
        </div><!-- post -->
        <div class="separator"></div>
        
        <div class="wykop" style="padding: 1px;" >
          <p style="margin-top: 10px;">
          Jeśli spodobał Ci się wpis to może umieścisz ten blog w swoim czytniku RSS?
          </p>
        </div>
        <div style="clear: left;"></div>

        

        
        <h3>Komentarze</h3>
        

        <div id="comments">
        
          <div id="comment-1298907" class="comment1 jogger">
            
            1.
            
            <img class="avatar-icon" src="http://blog.teamon.eu/files/favicon.png" alt="avatar icon" />
            
            
            <strong><a href="http://blog.teamon.eu">teamon</a></strong> napisał(a) 30 Lis 2008 o godz. 21:37:
            <div class="top"></div>
            <div class="content">
              <p>To jest jeden z tych &#8222;ficzerow&#8221; ktorych mi czasem bardzo brakowalo w ruby. Mozna bedzie sortowac taki hash?</p>
            </div>
            <div class="footer"></div>
          </div>
        
          <div id="comment-1298936" class="comment2 jogger">
            
            2.
            
            <img class="avatar-icon" src="http://c34.jogger.pl/files/favicon.png" alt="avatar icon" />
            
            
            <strong><a href="http://c34.jogger.pl">c34</a></strong> napisał(a) 30 Lis 2008 o godz. 22:13:
            <div class="top"></div>
            <div class="content">
              <p>&#8222;kilku przepięć wskaźników&#8221; jest chyba bardziej po polsku niż &#8222;kilku przepiąć wskaźników&#8221; </p>
            </div>
            <div class="footer"></div>
          </div>
        
          <div id="comment-1299064" class="comment1 jogger">
            
            3.
            
            <img class="avatar-icon" src="http://emes.jogger.pl/files/favicon.ico" alt="avatar icon" />
            
            
            <strong><a href="http://emes.jogger.pl">MySZ</a></strong> napisał(a) 01 Gru 2008 o godz. 08:37:
            <div class="top"></div>
            <div class="content">
              <p>O, zaczyna się robić jak array() w <span class="caps">PHP</span> ;)</p>
            </div>
            <div class="footer"></div>
          </div>
        
          <div id="comment-1299084" class="comment2 owner">
            
            4.
            
            <img class="avatar-icon" src="../../../../files/favicon.png" alt="avatar icon" />
            
            
            <strong><a href="../../../../index.html">Radarek</a></strong> napisał(a) 01 Gru 2008 o godz. 10:08:
            <div class="top"></div>
            <div class="content">
              <p><strong>teamon</strong>: na pytanie &#8222;czy można sortować hash&#8221; odpowiadam: hasha się nie sortuje :). To co możesz zrobić to posortować wcześniej pobraną listę kluczy, np.</p>

<pre><code>hash.keys.sort.each {|k| p hash[k] }
</code></pre>

<p>Jeśli chciałbyś przesortować klucze to musisz utworzyć sobie nowy hash i dodawać do niego elementy w odpowiedniej kolejności.</p>

<p><strong>c34</strong>: dzięki, poprawione.</p>

<p><strong>MySZ</strong>: spokojnie, nic się nie zaczyna. To przemyślana decyzja. Ruby nie musi czerpać nic z <span class="caps">PHP</span>.</p>
            </div>
            <div class="footer"></div>
          </div>
        
          <div id="comment-1299089" class="comment1 guest">
            
            5.
            
            
            <img class="avatar-icon" src="../../../../files/default-avatar-icon.png" alt="avatar icon" />
            
            <strong>MySZ</strong> napisał(a) 01 Gru 2008 o godz. 10:18:
            <div class="top"></div>
            <div class="content">
              <p>@Mysz: Nie ma to jak mala prowokacja od rana co  ? :) w <span class="caps">PHP</span> <span class="caps">NIGDY</span> nie bedziesz mogl zrobic tak http://pastie.org/327618 :P Jesli naprawde myslisz ze Ruby zblizyl sie przez to w jakikolwiek sposob do <span class="caps">PHP</span> to gratuluje wyobrazni ;] Jesli to tylko prowokacja, to ok lykam jak mlody pelikan, jesli nie to zapraszam do przecytania dokumentacji http://www.ruby-doc.org/core/classes/Hash.html i http://www.ruby-doc.org/core/classes/Enumerable.html oraz zapoznania sie z dokumentacja chodzby Pythona i jego rozwiazan w tej kwesti.</p>
            </div>
            <div class="footer"></div>
          </div>
        
          <div id="comment-1299090" class="comment2 guest">
            
            6.
            
            
            <img class="avatar-icon" src="../../../../files/default-avatar-icon.png" alt="avatar icon" />
            
            <strong>Paweł Kondzior</strong> napisał(a) 01 Gru 2008 o godz. 10:18:
            <div class="top"></div>
            <div class="content">
              <p>Przepraszam ze sie podszylem, totalnie nie chcacy, oczywiscie wpis byl mojego autorstwa :)</p>
            </div>
            <div class="footer"></div>
          </div>
        
          <div id="comment-1299190" class="comment1 jogger">
            
            7.
            
            <img class="avatar-icon" src="http://blog.teamon.eu/files/favicon.png" alt="avatar icon" />
            
            
            <strong><a href="http://blog.teamon.eu">teamon</a></strong> napisał(a) 01 Gru 2008 o godz. 15:37:
            <div class="top"></div>
            <div class="content">
              <p>@radarek:<br />
&#62;&#62; {&#8222;b&#8221; =&#62; 1, &#8222;a&#8221; =&#62; 2}.sort<br />
=&#62; [[&#8222;a&#8221;, 2], [&#8222;b&#8221;, 1]]<br />
;] <br />
Bo skoro juz mamy zachowanie kolejnosci to mozna by owa kolejnosc zmienic poprzez sortowanie (a nie zamieniac na tablice)</p>
            </div>
            <div class="footer"></div>
          </div>
        
          <div id="comment-1299196" class="comment2 owner">
            
            8.
            
            <img class="avatar-icon" src="../../../../files/favicon.png" alt="avatar icon" />
            
            
            <strong><a href="../../../../index.html">Radarek</a></strong> napisał(a) 01 Gru 2008 o godz. 15:42:
            <div class="top"></div>
            <div class="content">
              <p><strong>team</strong>, wiem do czego zmierzałeś, ale moim zdaniem dobrze, że zmiana dotyczy tylko i wyłącznie tego co opisałem i nic poza tym. Inaczej mięlibyśmy phpowe array, które ni to jest tablicą ni to hashem.</p>

<p>Tak jak mówiłem, jak chcesz to możesz sobie sam utworzyć nowy hash, np  tak:</p>

<pre><code class="ruby">h = {"b" =&#62; "bar", "a" =&#62; "foo"}
h = Hash[*h.sort.flatten]
p h
</code></pre>
            </div>
            <div class="footer"></div>
          </div>
        
          <div id="comment-1299199" class="comment1 owner">
            
            9.
            
            <img class="avatar-icon" src="../../../../files/favicon.png" alt="avatar icon" />
            
            
            <strong><a href="../../../../index.html">Radarek</a></strong> napisał(a) 01 Gru 2008 o godz. 15:46:
            <div class="top"></div>
            <div class="content">
              <p><strong>team</strong> oczywiście zawsze możesz sobie napisać własną implementację klasy SortedHash, które będzie hybrydą pomiędzy tablicą a hashem :).</p>
            </div>
            <div class="footer"></div>
          </div>
        
          <div id="comment-1299202" class="comment2 jogger">
            
            10.
            
            <img class="avatar-icon" src="http://blog.teamon.eu/files/favicon.png" alt="avatar icon" />
            
            
            <strong><a href="http://blog.teamon.eu">Teamon</a></strong> napisał(a) 01 Gru 2008 o godz. 15:50:
            <div class="top"></div>
            <div class="content">
              <p>Wiem, wiem ;) (&#8222;team&#8221; chyba jest srednim skrotem od mojego nicka :P)</p>
            </div>
            <div class="footer"></div>
          </div>
        
          <div id="comment-1299275" class="comment1 owner">
            
            11.
            
            <img class="avatar-icon" src="../../../../files/favicon.png" alt="avatar icon" />
            
            
            <strong><a href="../../../../index.html">Radarek</a></strong> napisał(a) 01 Gru 2008 o godz. 18:12:
            <div class="top"></div>
            <div class="content">
              <p>Ach, to moje roztargnienie. Wymyśliłem Ci właśnie skróconą wersję pseudonimu :).</p>
            </div>
            <div class="footer"></div>
          </div>
        
          <div id="comment-1299586" class="comment2 jogger">
            
            12.
            
            <img class="avatar-icon" src="http://emes.jogger.pl/files/favicon.ico" alt="avatar icon" />
            
            
            <strong><a href="http://emes.jogger.pl">MySZ</a></strong> napisał(a) 02 Gru 2008 o godz. 08:40:
            <div class="top"></div>
            <div class="content">
              <p><code>Radarek, </code>Paweł Kondzior: oczywiście że to był żart. Pomimo mojej swojej dość małej sympatii do Rubiego, wcale nie życzę mu podążania &#8222;the <span class="caps">PHP</span> way&#8221; :)</p>
            </div>
            <div class="footer"></div>
          </div>
        
          <div id="comment-1299631" class="comment1 guest">
            
            13.
            
            
            <img class="avatar-icon" src="../../../../files/default-avatar-icon.png" alt="avatar icon" />
            
            <strong>Paweł Kondzior</strong> napisał(a) 02 Gru 2008 o godz. 12:00:
            <div class="top"></div>
            <div class="content">
              <p>@MySZ: oczywiście <span class="caps">KISS</span> w php złą drogą nie jest, jednak programisci się gdzieś pogubili pare lat temu podczas wcielania jej w życie.</p>
            </div>
            <div class="footer"></div>
          </div>
        
          <div id="comment-1301198" class="comment2 jogger">
            
            14.
            
            
            <img class="avatar-icon" src="../../../../files/default-avatar-icon.png" alt="avatar icon" />
            
            <strong><a href="http://tomash.jogger.pl">Tomash</a></strong> napisał(a) 05 Gru 2008 o godz. 15:56:
            <div class="top"></div>
            <div class="content">
              <p>Radarek, OrderedHasha jak najbardziej się sortuje. Po to właśnie powstał &#8211; żeby móc ustawić arbitralny porządek, a nie &#8222;kolejność jest ukryta żeby interpreter mógł przeszukiwać w czasie O(1)&#8221; ;) </p>

<p>Mam nadzieję że implementacja w Ruby1.9 jest dojrzalsza niż w Railsach 2.0. Tak, kochani, RoR od grudnia&#8217;07 ma OrderedHasha, konkretnie dziedziczącego z Array i zhackowanego w jednym nieudokumentowanym (stąd próżno szukać w railsowym rdocu) ekranie kodu. Żeby się do czegoś nadawał, trzeba mu jeszcze parę linijek dopisać/domonkeypatchować.</p>

<p>Chciałbym tylko, żeby OrderedHash mógł być inicjalizowany/tworzony on-demand, a nie domyślnie zastępował wszystkie hashe w języku. Czasem (często) nie obchodzi mnie kolejność par, bo nie zamierzam po hashu iterować, a stały czas wyszukiwania (wyjęcia) czy włożenia elementu jest nie do przecenienia przy większych zestawach danych&#8230;</p>
            </div>
            <div class="footer"></div>
          </div>
        
          <div id="comment-1301203" class="comment1 owner">
            
            15.
            
            <img class="avatar-icon" src="../../../../files/favicon.png" alt="avatar icon" />
            
            
            <strong><a href="../../../../index.html">Radarek</a></strong> napisał(a) 05 Gru 2008 o godz. 16:04:
            <div class="top"></div>
            <div class="content">
              <p><strong>Tomash</strong>: zależy jak będziemy definiować &#8222;ordered hash&#8221;. W 1.9 Hash po prostu pamięta kolejność wstawianych elementów i tyle. Nie udostępnia żadnego interfejsu do przesortowania ich, jeśli chciałbyś to zrobić to musisz (jak pisałem) utworzyć nowy hash i powstawiać do niego elementy w zadanej kolejności.</p>

<p>Cała reszta zostaje taka sama. Wstawianie, pobieranie, usuwanie elementu ma dokładnie taką samą (tj. O(1)) złożoność. Gdyby miało być inaczej to na pewno nie zostałoby to zrobione.</p>
            </div>
            <div class="footer"></div>
          </div>
        
          <div id="comment-1302427" class="comment2 jogger">
            
            16.
            
            
            <img class="avatar-icon" src="../../../../files/default-avatar-icon.png" alt="avatar icon" />
            
            <strong><a href="http://tomash.jogger.pl">Tomash</a></strong> napisał(a) 07 Gru 2008 o godz. 23:39:
            <div class="top"></div>
            <div class="content">
              <p>Aha, czyli nie jest to OrderedHash sensu stricte. Uff :)</p>
            </div>
            <div class="footer"></div>
          </div>
        
        </div><!-- comments -->

        

        

        

        
        <h3>Musisz się zalogować, jeśli chcesz dodać komentarz.</h3>
        
      </div><!-- content -->

      <div class="cleaner"></div>

    </div><!-- content-wrapper -->

    <div id="footer" style="clear: both;">
    <div id="footer-shadow"></div>
        <h3>Czytelnicy</h3>
        <script type="text/javascript" src="http://pub.mybloglog.com/comm2.php?mblID=2007050116063791&amp;c_width=800&amp;c_sn_opt=n&amp;c_rows=3&amp;c_img_size=f&amp;c_heading_text=&amp;c_color_heading_bg=FFFFFF&amp;c_color_heading=000000&amp;c_color_link_bg=FFFFFF&amp;c_color_link=000000&amp;c_color_bottom_bg=FFFFFF"></script>
      <div id="bottom-para">
        <p>
          &copy; 2007-2010, Radarek bloguje. Graphics, css, xhtml, javascript code by <a href="../../../../index.html">Radarek</a>
          | <a href="http://validator.w3.org/check/referer">Valid XHTML 1.0 Strict</a>
          | <a href="http://jigsaw.w3.org/css-validator/check/referer">Valid CSS</a>
        </p>
      </div>
    </div><!-- footer -->

    <div id="jruby-irb-console" style="display: none;">
      <div class="overlay">
        <div class="window">
          <div class="inner">
            <a class="close-popup" href="index.html#">Zamknij</a>
            <div class="irb-console-applet">
            </div>
          </div>
        </div>
      </div>
    </div>
    <!--</div>-->
  </body>
</html>